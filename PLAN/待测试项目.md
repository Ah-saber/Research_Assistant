# Research Assistant - 待测试项目

**文档版本**: v1.0
**创建日期**: 2026-01-26
**状态**: 待测试

## 概述

本文档记录Research Assistant项目中需要后续测试的功能和场景。

---

## 一、完整工作流测试

### 1.1 端到端论文阅读流程

**测试场景**: 从搜索论文到创建笔记的完整流程

```
用户: 搜索关于"diffusion model"的论文
你: 返回相关论文列表
用户: 总结第一篇论文
你: 生成详细摘要
用户: 为这篇论文创建笔记
你: 创建包含MyPoint、概率框架分析、论文笔记的完整笔记
```

**验证点**:
- [ ] 搜索结果相关性
- [ ] 摘要质量和结构（6段式）
- [ ] 笔记包含三个模块（MyPoint、概率框架分析、论文笔记）
- [ ] 概率框架分析包含：概率建模、信息论视角、生成式/判别式、贝叶斯视角
- [ ] 自动链接相关笔记

### 1.2 端到端Idea管理流程

**测试场景**: 从捕捉Idea到回顾整理的完整流程

```
用户: 记录Idea：用变分推断改进扩散模型采样
你: 创建包含理论动机分析的Idea笔记
用户: 回顾Inspiration中的Idea
你: 显示Idea回顾报告
用户: 整理Idea
你: 提供整理建议
```

**验证点**:
- [ ] Idea包含理论动机分析模块
- [ ] 理论动机分析包含：理论基础、可能性评估、跨领域关联、问题本质
- [ ] 回顾报告格式正确
- [ ] 整理建议合理

### 1.3 跨工具协同流程

**测试场景**: Zotero → Obsidian → Idea的跨工具协同

```
用户: 在Zotero中搜索论文
你: 返回搜索结果
用户: 选择论文并创建笔记
你: 在Obsidian中创建笔记
用户: 从论文笔记中提取Idea
你: 在Inspiration中创建Idea
用户: 将Idea链接回论文笔记
你: 建立双向链接
```

**验证点**:
- [ ] Zotero数据正确提取
- [ ] Obsidian笔记格式正确
- [ ] Idea从笔记正确提取
- [ ] 双向链接正确建立

---

## 二、边界情况测试

### 2.1 MCP工具异常处理

#### 全文超限处理

**测试场景**: 论文全文超过token限制

```
用户: 为一篇超长论文创建笔记
```

**验证点**:
- [ ] 检测到超限并使用降级策略
- [ ] 基于摘要生成基础笔记
- [ ] 明确标注"基于摘要生成"
- [ ] 不阻塞笔记创建流程

#### 空注释处理

**测试场景**: 论文没有PDF注释

```
用户: 提取一篇没有注释的论文的注释
```

**验证点**:
- [ ] 友好提示"该论文暂无注释"
- [ ] 不阻塞工作流程
- [ ] 可以继续创建笔记

#### 无搜索结果

**测试场景**: 搜索没有结果

```
用户: 搜索一个非常特殊的查询
```

**验证点**:
- [ ] 友好提示"未找到相关论文"
- [ ] 建议调整搜索词
- [ ] 提供搜索建议

### 2.2 访问权限边界

#### IDEA目录访问

**测试场景**: 尝试访问IDEA目录

```
用户: 帮我整理IDEA目录
```

**验证点**:
- [ ] 使用AskUserQuestion询问授权
- [ ] 得到授权后才能访问
- [ ] 未授权时明确说明限制

#### Inspiration目录访问

**测试场景**: 访问Inspiration目录

```
用户: 回顾Inspiration中的Idea
```

**验证点**:
- [ ] 直接访问，无需授权
- [ ] 正确读取Idea文件

### 2.3 笔记格式边界

#### 无Frontmatter的笔记

**测试场景**: 分析没有Frontmatter的笔记

```
用户: 分析这些旧笔记（没有Frontmatter）
```

**验证点**:
- [ ] 正确识别笔记类型
- [ ] 建议添加Frontmatter
- [ ] 不因格式问题而失败

#### 损坏的链接

**测试场景**: 笔记中有指向不存在文件的链接

```
用户: 分析笔记链接
```

**验证点**:
- [ ] 识别损坏的链接
- [ ] 建议修复或删除
- [ ] 不因链接问题而失败

---

## 三、性能测试

### 3.1 大量笔记处理

**测试场景**: 分析1000+笔记

```
用户: 分析整个vault的笔记
```

**验证点**:
- [ ] 响应时间 < 30秒
- [ ] 内存占用合理
- [ ] 结果准确完整

### 3.2 批量操作

**测试场景**: 批量创建多篇论文笔记

```
用户: 为这5篇论文创建笔记
```

**验证点**:
- [ ] 正确处理所有论文
- [ ] 进度反馈清晰
- [ ] 失败时有友好提示

---

## 四、人设一致性测试

### 4.1 理论框架体现

**测试场景**: 创建论文笔记

```
用户: 为一篇VAE论文创建笔记
```

**验证点**:
- [ ] 概率框架分析正确识别变分推断
- [ ] 信息论视角提到KL散度
- [ ] 生成式/判别式分析正确
- [ ] 贝叶斯视角提到先验和后验

### 4.2 跨领域知识映射

**测试场景**: 分析一篇NLP方法迁移到视觉的论文

```
用户: 为Vision Transformer论文创建笔记
```

**验证点**:
- [ ] 识别NLP→视觉的迁移
- [ ] 正确映射自注意力机制
- [ ] 提到跨领域联系

### 4.3 数学符号一致性

**测试场景**: 包含多个公式的论文

```
用户: 为一篇数学推导较多的论文创建笔记
```

**验证点**:
- [ ] 公式格式正确（LaTeX）
- [ ] 符号定义清晰
- [ ] 符号使用一致

---

## 五、交互流程测试

### 5.1 AskUserQuestion使用

**测试场景**: 需要用户选择的操作

```
用户: 整理笔记
你: 提供整理选项，使用AskUserQuestion
```

**验证点**:
- [ ] 选项清晰明确
- [ ] 默认选项合理
- [ ] 其他选项可用

### 5.2 多轮对话

**测试场景**: 需要多轮交互的复杂任务

```
用户: 我想深入理解这篇论文
你: [第一步：生成摘要]
用户: 继续
你: [第二步：提取关键公式]
用户: 继续
你: [第三步：创建笔记]
```

**验证点**:
- [ ] 每轮目标明确
- [ ] 进度可追踪
- [ ] 可以中途调整

---

## 六、兼容性测试

### 6.1 Zotero版本兼容

**测试场景**: 不同Zotero版本

```
- Zotero 6.x
- Zotero 7.x
```

**验证点**:
- [ ] MCP工具正常工作
- [ ] 数据格式兼容

### 6.2 Obsidian笔记格式

**测试场景**: 不同笔记格式

```
- 标准Markdown
- Obsidian Flavored Markdown
- 包含Dataview的笔记
- 包含Canvas的笔记
```

**验证点**:
- [ ] 正确读取
- [ ] 不破坏格式
- [ ] 正确处理特殊语法

---

## 七、笔记整理脚本测试

### 7.1 batch_standardize.py 测试

**测试场景**: 批量添加 Frontmatter 和标签

**验证点**:
- [ ] 正确识别文件名作为标题
- [ ] 从文件内容提取首个 # 标题
- [ ] 根据路径正确添加 category（课业/项目/事务/杂项）
- [ ] 根据内容自动生成合适的英文标签
- [ ] 跳过已有 Frontmatter 的文件
- [ ] 正确处理中文文件名
- [ ] 处理结果可重复运行

**测试命令**:
```bash
cd D:/work_project/my_project/Research_Assistant/scripts
python batch_standardize.py
```

**预期结果**:
- 所有 Markdown 文件添加标准 Frontmatter
- 标签格式正确（英文、层级结构）
- 不破坏现有内容
- 可重复运行不产生重复 Frontmatter

### 7.2 fix_wikilinks_v2.py 测试

**测试场景**: 验证和修复 Wikilink 链接

**验证点**:
- [ ] 正确识别所有 Wikilink（包括图片、视频等资源）
- [ ] 将简单文件名链接更新为相对路径
- [ ] 正确处理 attach 目录中的资源文件
- [ ] 检测并报告断开的链接
- [ ] 修复后的链接在 Obsidian 中可点击
- [ ] 不破坏表格中的 `\|` 转义符
- [ ] 正确处理已有相对路径的链接

**测试命令**:
```bash
cd D:/work_project/my_project/Research_Assistant/scripts
python fix_wikilinks_v2.py
```

**预期结果**:
- 扫描并报告所有断开的链接
- 成功修复可修复的链接
- 修复后链接使用正确的相对路径格式
- 资源文件链接正确指向 attach 目录

### 7.3 脚本协同测试

**测试场景**: 两个脚本配合使用

**验证点**:
- [ ] 先运行 fix_wikilinks_v2.py 再运行 batch_standardize.py 不冲突
- [ ] 可按任意顺序重复运行
- [ ] 不会相互覆盖或破坏处理结果

---

## 测试优先级

| 优先级 | 测试项 | 原因 |
|--------|--------|------|
| P0 | 端到端论文阅读流程 | 核心功能 |
| P0 | 端到端Idea管理流程 | 核心功能 |
| P0 | batch_standardize.py 脚本 | 日志整理依赖 |
| P0 | fix_wikilinks_v2.py 脚本 | 日志整理依赖 |
| P1 | 人设一致性测试 | 人设是新增核心功能 |
| P1 | MCP工具异常处理 | 稳定性关键 |
| P2 | 边界情况测试 | 健壮性 |
| P2 | 性能测试 | 用户体验 |
| P3 | 兼容性测试 | 长期维护 |

---

## 测试记录模板

```
### 测试日期: YYYY-MM-DD

**测试项**: [测试名称]

**测试步骤**:
1.
2.
3.

**测试结果**: ✅ 通过 / ❌ 失败 / ⚠️ 部分通过

**问题描述**: [如有问题]

**建议修复**: [如有建议]
```

---

## 下一步

1. 按优先级执行测试
2. 记录测试结果
3. 修复发现的问题
4. 更新本文档
