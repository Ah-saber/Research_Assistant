# Research Assistant - 产品需求文档 (PRD)

## 项目概述

构建一个基于Claude Code的个人学术助理系统，整合Zotero文献库和Obsidian笔记系统。

## AI人设

### 专业身份

本AI助手专为**计算机视觉学者**设计，核心特征：

- **研究领域**：基础视觉任务、生成模型、视觉架构
- **理论框架**：概率与统计偏好
- **思维特点**：理论导向、问题本质提炼、跨领域迁移
- **灵感来源**：数学/物理类比、NLP方法迁移、理论反思

### 人设文档

详细的人设定义在独立的 `PERSONA.md` 文件中，包含：

- **知识框架**：概率建模、信息论工具、优化理论
- **思维方式**：理论优先、跨领域映射、方法论创新
- **输出标准**：论文笔记概率框架分析、Idea理论动机分析
- **跨领域知识映射**：NLP↔视觉、物理类比、优化理论↔概率推断

## 核心需求

### 1. 文献管理

#### `/paper-search` - 论文搜索
- 展示信息：标题、作者、年份、期刊/会议、简要摘要
- 展示方式：卡片列表
- 搜索方式：关键词搜索 + 语义搜索 + 高级筛选
- 排序方式：相关性优先
- 结果数量：用户可配置
- 后续操作：提取注释、总结论文、创建笔记

#### `/paper-summary` - 论文总结
- 摘要结构：背景 → 问题 → 动机 → 创新方法 → 结果（实验）→ 结论
- 技术深度：详细版（800字以上）
- 额外内容：关键公式提取和解释
- 语言风格：学术风格

#### `/annotation-extract` - 注释提取
- 注释类型：高亮 + 笔记
- 组织方式：按颜色分组
- 上下文信息：包含页码和位置
- 输出格式：笔记格式（可导入Obsidian）

#### `/paper-notes` - 论文笔记创建
- 包含三个模块：
  1. **MyPoint** - 记录个人思考、联想延伸、疑惑问题
  2. **概率框架分析** - 概率建模、信息论视角、生成式/判别式分析、贝叶斯视角
  3. **论文笔记** - 深入研究报告（背景、问题、动机、创新方法、结果、总结）
- 包含主要公式和疑惑解答
- Frontmatter：基础元数据（title、tags、date）

### 2. 笔记管理

#### `/note-analyze` - 笔记分析
- **核心功能**：语义分析 - 发现笔记之间的语义联系
- 分析内容：孤立笔记、链接分析、语义分析（重点）
- 语义分析重点：
  - 发现相似相同的思考和用法
  - 分析是否有相同的本质或同一主题
  - 主题关联、相似概念识别
- 分析范围：用户可配置
- 输出形式：报告 + 改进建议

#### `/note-organize` - 笔记整理
- 整理方式：标签规范化、建立链接、合并笔记
- 标签规范：层级标签格式（#一级/二级/三级）
- 合并策略：内容基本一致的笔记（需要用户单独确认）
- 执行模式：先展示方案，确认后执行

#### `/note-template` - 笔记模板
- 模板类型：论文笔记、概念笔记、项目笔记、日志笔记
- 模板元素：Frontmatter、模板语法、模板格式

#### `/note-link` - 笔记关联
- 关联方式：语义关联、标签相似、共同引用
- 链接类型：带描述链接（[[链接|描述]]）
- 链接位置（智能判断）：
  - 内容中提及：在相关段落添加
  - 主题相关：在笔记末尾添加
- 执行模式：用户选择后添加

#### `/note-standardize` - 笔记标准化
- **新增功能**：整合obsidian-markdown高级特性
- Callout格式化：关键疑惑/注意点提醒
- Wikilink修复：使用Glob精确获取文件名，转换为[[完整文件名|显示名]]
- Frontmatter管理：缺失补全、格式规范化、智能提取
- 标签规范化：英文术语、层级结构（#CV/Generation/Diffusion）
- Embeds引用：概念引用场景（论文笔记中嵌入概念定义）
- 执行模式：分析后选择执行
- **状态**：已完成开发，待测试

### 3. Idea管理

#### `/idea-capture` - Idea捕捉
- 捕捉方式：快速记录、完整想法、从笔记提取
- Idea元素：标题、详细描述、**理论动机分析**、关联内容
- 理论动机分析：理论基础、可能性评估、跨领域关联、问题本质
- 分类方式：标签分类 + 目录分类
- Idea状态：萌芽、思考中、已放弃、已实现
- 存储位置：**Inspiration目录**（临时存放，用户后续手动移至IDEA目录）
- 访问规则：Inspiration目录可自由访问

#### `/idea-organize` - Idea整理
- 整理内容：标签规范化、分组整理、去重识别
- 执行模式：建议确认后执行

#### `/idea-review` - Idea回顾
- 回顾方式：按状态筛选、按时间排序、按主题分组
- 回顾内容：基本信息、关联内容、行动建议
- 状态更新：用户确认后推进状态，否则保持不变
- 行动建议：阅读建议、实验建议、笔记建议

## 技术需求

| 组件 | 方案 | 优先级 |
|------|------|--------|
| Zotero集成 | 54yyyu/zotero-mcp | P0 |
| Obsidian Markdown | obsidian-markdown skill（Skill工具调用） | P0 |
| PDF处理 | document-skills (pdf skill) | P0 |
| 工作流封装 | 自定义Skills | P1 |
| 语义分析 | 待确定技术方案 | P1 |

## 非功能需求

### 性能
- 搜索响应时间 < 5秒
- 笔记分析支持1000+笔记
- 语义分析响应时间 < 10秒

### 安全性
- **受保护目录**：`科研/IDEA`、`思绪`（需要明确授权才能访问）
- **自由访问目录**：`Inspiration`（新增）和其他所有目录

### 兼容性
- 兼容现有笔记格式
- 不破坏现有内容

## 用户故事

### US1: 搜索论文
作为研究者，我希望快速搜索相关论文，以便找到需要阅读的文献。

### US2: 总结论文
作为研究者，我希望自动生成详细的学术风格摘要，以便深入理解论文内容。

### US3: 整理笔记
作为研究者，我希望通过语义分析发现笔记之间的深层联系，以便更好地组织知识。

### US4: 记录Idea
作为研究者，我希望快速记录研究想法到Inspiration目录，稍后确认后再移至IDEA目录。

## 设计决策

1. **标签格式**：层级标签，使用英文术语（#CV/Generation/Diffusion）
2. **链接类型**：带描述的Wikilink（[[完整文件名|显示名]]）
3. **Frontmatter**：单个日期字段（date），统一格式
4. **Callout**：仅用于关键疑惑/注意点提醒
5. **Idea状态**：萌芽、思考中、已放弃、已实现
6. **摘要结构**：背景→问题→动机→创新方法→结果→结论
7. **论文笔记结构**：MyPoint + 概率框架分析 + 论文笔记（三个模块）
8. **Idea工作流**：Inspiration目录（临时）→ 用户确认 → IDEA目录（正式）
9. **AI人设**：计算机视觉学者助理，概率与统计理论框架
10. **obsidian-markdown**：通过Skill工具调用，支持Callout、Wikilink、Frontmatter、标签、Embeds

## 约束条件

- Zotero只读访问
- IDEA和思绪目录访问受限
- Inspiration目录可自由访问
- 使用中文笔记

